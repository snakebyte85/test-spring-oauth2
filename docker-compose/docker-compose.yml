version: '3'

services:

#  orga.gateway:
#     container_name: orga.gateway
#     image: shared/gateway:${TAG}
#     volumes: 
#       - "./orgA/gateway:/etc/gateway"
#     ports:
#       - "8080:8080"

  orga.workflow:
     container_name: orga.workflow
     image: shared/workflow:${TAG}
     volumes: 
       - "./orgA/workflow:/etc/workflow"
     environment:
      APP_OPTS: "--spring.profiles.active=dev"
     ports:
       - "8080:8080"
       
  orga.bcma:
     container_name: orga.bcma
     image: shared/bcma:${TAG}
     volumes: 
       - "./orgA/bcma:/etc/bcma"
     environment:
      APP_OPTS: "--spring.profiles.active=dev"


  orgb.workflow:
     container_name: orgb.workflow
     image: shared/workflow:${TAG}
     volumes: 
       - "./orgB/workflow:/etc/workflow"
     environment:
      APP_OPTS: "--spring.profiles.active=dev"
     ports:
       - "8081:8080"
       
  orgb.bcma:
     container_name: orgb.bcma
     image: shared/bcma:${TAG}
     environment:
      APP_OPTS: "--spring.profiles.active=dev"
     volumes: 
       - "./orgB/bcma:/etc/bcma"
       
  dashboard:
     container_name: dashboard
     image: shared/dashboard:${TAG}
     environment:
      APP_OPTS: "--spring.profiles.active=dev"
     volumes: 
       - "./dashboard:/etc/dashboard"
     ports:
       - "8090:8080"
         
  activemq:
    container_name: activemq
    image: webcenter/activemq:latest
    environment:
      - ACTIVEMQ_STATIC_QUEUE=orgA;orgB
    ports:
      - "8161:8161"
